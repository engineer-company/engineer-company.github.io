# Pretty Cog Icons

## Background

This project contains the various icons for my engineering website.
It targets the most common operating systems (Android, Apple, Microsoft)
and browsers (Chrome, Firefox, IE / Edge, Safari)
in addition to many other popular platforms.

Before embarking on this activity, I didn't anticipate the complexities
and gotchas relating to favicons and touch icons.
Cross-platform support has many pitfalls and is a lot tricker than
I had originally anticipated! After putting so much time and effort into the
creation of my icons, I felt it was worth documenting my learnings and processes.

Two of the online resources that I used at the beginning of this project were
the [RealFaviconGenerator](http://realfavicongenerator.net/faq)
and the [favicon-cheat-sheet](https://github.com/audreyr/favicon-cheat-sheet).
They are really useful references and have helped me to make a number
of the technical choices.

I've provided support for a number of platforms
and split them into separate folders for the sake of clarity:

* **android** - Quick access icons, launcher icons and splash icons
* **apple** - Touch icons for the home screen and browser favorites on iOS
* **classic** - Favorites / bookmarks, browser tabs, desktop links, etc.
* **microsoft** - Start menu tiles for Windows 8.1 / Windows 10 + IE 11
* **source** - The original SVG images from which all of the icons were generated

All of the icons were generated using [ImageMagick](https://www.imagemagick.org/).

The remainder of this document describes how the icons were created
and the various platforms / features that are supported.

***

## Where do my PWA icons show?

1. Safari on iOS and iPadOS ignores a PWA’s manifest and uses apple-touch-icon
    metadata on the homepage instead. The icon must be square without curves
    or padding and served in varying sizes specified by Apple.
2. Safari on MacOS uses the webmanifest.json file to get the icon, but it must be
    shaped like a macOS icon with padding and curves already added.
3. Chrome on macOS, Android devices, and other platforms uses what should be
    the standard icon for every browser and platform: a masked icon. Masked
    icons use padding to be adaptive and appear correctly on any platform.
    Well, any platform except iOS and Safari on macOS.

Different platforms will use either of the two icons.
- On **Android**, the **home screen** and **install prompt** use the icon with
    the purpose `maskable`
- The **splash screen** generated by recent **Android phones** (post 2020) uses
    the icon with the purpose `maskable`
- Older or low-end **Android phones** may have a **splash screen** generated
    from the icon with the purpose `any` instead.
- **Chrome OS** uses the icon with the purpose `maskable`
- **Windows** uses the icon with the purpose `any` with all browsers, as it
    does not enforce any particular icon shapes
- **macOS Ventura** or lower uses the icon with the purpose `any`
- **macOS Sonoma** or higher uses the icon with the purpose `maskable`
- **iOS** requires an extra set of icons set with the `apple-touch-icon`
    (home screen icon)  and `apple-touch-startup-image` meta tags (splash screen)

***

## Source

The "source" folder contains the master images
in [SVG](https://en.wikipedia.org/wiki/Scalable_Vector_Graphics) format.

* **favicon • dev • small blue cog with inner hole.svg** - The colour image
    that is used for most of the icons
* **favicon • dev • small blue cog with inner fill.svg** - Blue cog with an inner fill
* **favicon • dev • small black cog with inner hole.svg** - Monochrome cog with hole

***

## ImageMagick

[ImageMagick](https://www.imagemagick.org/) is an image processing tool
which can be used from the command line.

The following options are used to create most of the images in this package:

* **-background** is used to specify a solid background colour or a transparent
    background
* **-trim** removes any redundant space around the source image
* **-resize** is fairly obvious but it is worth noting that the original aspect
    ratio is retained
* **-gravity** specifies how the resized image is to be positioned on the
    final canvas
* **-extent** specifies the size of the final canvas and utilises the
    gravity parameter

## Generating favicon using ImageMagick on the Command-Line

with background

```bash
magick \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -bordercolor white \
    -border 0 \
    \( -clone 0 -resize 16x16 \) \
    \( -clone 0 -resize 32x32 \) \
    \( -clone 0 -resize 48x48 \) \
    \( -clone 0 -resize 64x64 \) \
    -delete 0 \
    -alpha off \
    -colors 256 \
    "favicon.ico"
```

or without background and more sizes

```bash
magick \
    -density 256x256 \
    -define icon:auto-resize=256,128,96,64,48,32,16 \
    -background none \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    "favicon.ico"
```

### References

* ImageMagick - [Trim, the 'Auto-Crop' Operator](http://www.imagemagick.org/Usage/crop/#trim)
* ImageMagick - [Resizing Images](http://www.imagemagick.org/Usage/resize/#resize)
* Matteo Spinelli - [Create fixed size thumbnails with ImageMagick](http://cubiq.org/create-fixed-size-thumbnails-with-imagemagick)

***

## Webmanifest — Android & Chrome

512×512 px — Google Play Store icon
192×192 px — High-resolution launcher icon
144×144 px — Medium-density launcher
96×96 px — Low-density devices
72×72 px — Extra-low-density devices
48×48 px — Legacy fallback size

The "android" folder contains all of the images used by Android Chrome,
    referenced by the Web App manifest.

The Android images are primarily used for launcher icons and splash screens.
    This package includes images for all of the standard pixel densities
    documented for Android.

Launcher Icon for Web App:

|    DPI    |   120 dpi   |    160 dpi   |    240 dpi   |    320 dpi   |    480 dpi   |    640 dpi    |
|:---------:|:-----------:|:------------:|:------------:|:------------:|:------------:|:-------------:|
|  Density  | ldpi @0.75x |  mdpi @1.0x  |  hdpi @1.5x  |  xhdpi @2.0x | xxhdpi @3.0x | xxxhdpi @4.0x |
| Icon Size | 36 x 36 px  |  48 x 48 px  |  72 x 72 px  |  96 x 96 px  | 144 x 144 px | 192 x 192 px  |

Splash Screen for Web App:

|    DPI    |   120 dpi   |    160 dpi   |    240 dpi   |    320 dpi   |    480 dpi   |    640 dpi    |
|:---------:|:-----------:|:------------:|:------------:|:------------:|:------------:|:-------------:|
|  Density  | ldpi @0.75x |  mdpi @1.0x  |  hdpi @1.5x  |  xhdpi @2.0x | xxhdpi @3.0x | xxxhdpi @4.0x |
| Icon Size | 96 x 96 px  | 128 x 128 px | 192 x 192 px | 256 x 256 px | 384 x 384 px | 512 x 512 px  |

The images must be listed in webmanifest.json along with other Web App metadata:

> "monochrome", "maskable", "any"

```json
{
  "name": "Engineer",
  "short_name": "Engineer",
  "description": "Software Development & IT Consultancy Services",
  "start_url": ".",
  "display": "standalone",
  "background_color": "#ebebeb",
  "theme_color": "#6b0083",
  "orientation": "any",
  "scope": "/",
  "lang": "en",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "16x16 32x32 48x48 64x64 96x96 128x128 256x256"
    },
    {
      "src": "favicon.svg",
      "sizes": "257x257 512x512 1024x1024"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-36x36.png",
      "sizes": "36x36",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-48x48.png",
      "sizes": "48x48",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-72x72.png",
      "sizes": "72x72",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-96x96.png",
      "sizes": "96x96",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-128x128.png",
      "sizes": "128x128",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-144x144.png",
      "sizes": "144x144",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-192x192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-256x256.png",
      "sizes": "256x256",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-384x384.png",
      "sizes": "384x384",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/any/fabulous-android-icon-any-512x512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-36x36.png",
      "sizes": "36x36",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-48x48.png",
      "sizes": "48x48",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-72x72.png",
      "sizes": "72x72",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-96x96.png",
      "sizes": "96x96",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-128x128.png",
      "sizes": "128x128",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-144x144.png",
      "sizes": "144x144",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-192x192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-256x256.png",
      "sizes": "256x256",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-384x384.png",
      "sizes": "384x384",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/maskable/fabulous-android-icon-maskable-512x512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-36x36.png",
      "sizes": "36x36",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-48x48.png",
      "sizes": "48x48",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-72x72.png",
      "sizes": "72x72",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-96x96.png",
      "sizes": "96x96",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-128x128.png",
      "sizes": "128x128",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-144x144.png",
      "sizes": "144x144",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-192x192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-256x256.png",
      "sizes": "256x256",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-384x384.png",
      "sizes": "384x384",
      "type": "image/png",
      "purpose": "monochrome"
    },
    {
      "src": "assets/webmanifest/icons/monochrome/fabulous-android-icon-monochrome-512x512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "monochrome"
    }
  ],
  "splash_screens": [
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-1125x2436.png",
      "sizes": "1125x2436",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-750x1334.png",
      "sizes": "750x1334",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-1242x2208.png",
      "sizes": "1242x2208",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-1668x2224.png",
      "sizes": "1668x2224",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-2048x2732.png",
      "sizes": "2048x2732",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-1536x2048.png",
      "sizes": "1536x2048",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-320x426.png",
      "sizes": "320x426",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-320x470.png",
      "sizes": "320x470",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-480x640.png",
      "sizes": "480x640",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-720x960.png",
      "sizes": "720x960",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-960x1280.png",
      "sizes": "960x1280",
      "type": "image/png"
    },
    {
      "src": "assets/webmanifest/splash_screens/fabulous-android-splash_screen-1280x1920.png",
      "sizes": "1280x1920",
      "type": "image/png"
    }
  ]
}
```

The manifest itself requires a link in the \<head> section of the HTML:

```xml
<link rel="manifest" href="manifest.webmanifest">
```

To support older versions of Android Chrome (M31 to M38) there is an additional declaration in the HTML:

```xml
<meta name="mobile-web-app-capable" content="yes">
```

A theme colour can also be specified as follows:

```xml
<meta name="theme-color" content="#387ebb">
```

### Commands

> All of the Android images were generated with transparent backgrounds
and the border recommended on Material Design:

Plain code without padding (purpose: any):

```bash
 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 32x32 \
    -gravity center \
    -extent 36x36 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-36x36.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 44x44 \
    -gravity center \
    -extent 48x48 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-48x48.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 66x66 \
    -gravity center \
    -extent 72x72 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-72x72.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 88x88 \
    -gravity center \
    -extent 96x96 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-96x96.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 118x118 \
    -gravity center \
    -extent 128x128 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-128x128.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 132x132 \
    -gravity center \
    -extent 144x144 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-144x144.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 176x176 \
    -gravity center \
    -extent 192x192 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-192x192.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 234x234 \
    -gravity center \
    -extent 256x256 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-256x256.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 352x352 \
    -gravity center \
    -extent 384x384 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-384x384.png"

 magick \
    -background transparent \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -trim \
    -resize 470x470 \
    -gravity center \
    -extent 512x512 \
    "assets/webmanifest/icons/any/fabulous-android-icon-any-512x512.png"
```

scripted version without padding (purpose: any):

```bash
source_icon="assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg"

target_folder="assets/webmanifest/icons/any"

mkdir -p "${target_folder}"

declare -a iconsArray

iconsArray=()

iconsArray+=(
    "32x32|36x36"
    "44x44|48x48"
    "66x66|72x72"
    "88x88|96x96"
    "118x118|128x128"
    "132x132|144x144"
    "176x176|192x192"
    "234x234|256x256"
    "352x352|384x384"
    "470x470|512x512"
)

for icon in ${iconsArray[@]}; do

    IFS="|" read -r -a arr <<<"${icon}"

    icon_resize="${arr[0]}"
    icon_extent="${arr[1]}"

    # echo "${icon_resize}"
    # echo "${icon_extent}"

    magick \
        -background transparent \
        "${source_icon}" \
        -trim \
        -resize ${icon_resize} \
        -gravity center \
        -extent ${icon_extent} \
        "${target_folder}/fabulous-android-icon-any-${icon_extent}.png"

done
```

scripted version with padding (purpose: maskable):

```bash
source_icon="assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg"

target_folder="assets/webmanifest/icons/maskable"

mkdir -p "${target_folder}"

declare -a iconsArray

iconsArray=()

iconsArray+=(36 48 72 96 128 144 192 256 384 512)

for icon in ${iconsArray[@]}; do

    # Using a Math Trick:
    # icon_resize=$(( ( ($icon + 100 - 1) / 100 ) * 60 ))
    
    # Half-up Rounding:
    # icon_resize=$(( ( ($icon + 100 / 2) / 100 ) * 60 ))
    
    # Using bc + printf
    icon_resize=$( printf "%.0f\n" $( echo "scale=2; ${icon} * 0.6" | bc) )
    
    icon_resize="${icon_resize}x${icon_resize}"
    
    icon_extent="${icon}x${icon}"

    echo "${icon_resize} | ${icon_extent}"

    magick \
        -background transparent \
        "${source_icon}" \
        -trim \
        -resize ${icon_resize} \
        -gravity center \
        -extent ${icon_extent} \
        "${target_folder}/fabulous-android-icon-maskable-${icon_extent}.png"

done
```

output (Using a Math Trick)

```bash
60x60 | 36x36
60x60 | 48x48
60x60 | 72x72
60x60 | 96x96
120x120 | 128x128
120x120 | 144x144
120x120 | 192x192
180x180 | 256x256
240x240 | 384x384
360x360 | 512x512
```

output (Half-up Rounding)

```bash
0x0 | 36x36
0x0 | 48x48
60x60 | 72x72
60x60 | 96x96
60x60 | 128x128
60x60 | 144x144
120x120 | 192x192
180x180 | 256x256
240x240 | 384x384
300x300 | 512x512
```

output (Using bc + printf)

```bash
22x22 | 36x36
29x29 | 48x48
43x43 | 72x72
58x58 | 96x96
77x77 | 128x128
86x86 | 144x144
115x115 | 192x192
154x154 | 256x256
230x230 | 384x384
307x307 | 512x512
```

scripted version with padding (purpose: monochrome):

```bash
source_icon="assets/workshop/icons/source/favicon • dev • small black cog with inner hole.svg"

target_folder="assets/webmanifest/icons/monochrome"

mkdir -p "${target_folder}"

declare -a iconsArray

iconsArray=()

iconsArray+=(36 48 72 96 128 144 192 256 384 512)

for icon in ${iconsArray[@]}; do

    # Using a Math Trick:
    # icon_resize=$(( ( ($icon + 100 - 1) / 100 ) * 60 ))
    
    # Half-up Rounding:
    # icon_resize=$(( ( ($icon + 100 / 2) / 100 ) * 60 ))
    
    # Using bc + printf
    icon_resize=$( printf "%.0f\n" $( echo "scale=2; ${icon} * 0.6" | bc) )
    
    icon_resize="${icon_resize}x${icon_resize}"
    
    icon_extent="${icon}x${icon}"

    echo "${icon_resize} | ${icon_extent}"

    magick \
        -background transparent \
        "${source_icon}" \
        -trim \
        -resize ${icon_resize} \
        -gravity center \
        -extent ${icon_extent} \
        "${target_folder}/fabulous-android-icon-monochrome-${icon_extent}.png"

done
```

splash_screens — scripted version:

```bash
source_icon="assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg"

target_folder="assets/webmanifest/splash_screens"

mkdir -p "${target_folder}"

declare -a splash_screensArray

splash_screensArray=()

splash_screensArray+=(
    "1125x2436"
    "750x1334"
    "1242x2208"
    "1668x2224"
    "2048x2732"
    "1536x2048"
    "320x426"
    "320x470"
    "480x640"
    "720x960"
    "960x1280"
    "1280x1920"
)

for icon in ${splash_screensArray[@]}; do

    IFS="x" read -r -a arr <<<"${icon}"

    splash_x="${arr[0]}"
    splash_y="${arr[1]}"

    # echo "${splash_x}"
    # echo "${splash_y}"

    if [[ ${splash_x} -le ${splash_y} ]]; then
        splash_resize="${splash_x}"
    else
        splash_resize="${splash_y}"
    fi

    # Using bc + printf
    splash_resize=$( printf "%.0f\n" $( echo "scale=2; ${splash_resize} * 0.6" | bc) )
    
    splash_resize="${splash_resize}x${splash_resize}"
    
    splash_extent="${icon}"

    echo "${splash_resize} | ${splash_extent}"

    magick \
        -background transparent \
        "${source_icon}" \
        -trim \
        -resize ${splash_resize} \
        -gravity center \
        -extent ${splash_extent} \
        "${target_folder}/fabulous-android-splash_screen-${splash_extent}.png"

done
```

output:

```bash
675x675 | 1125x2436
450x450 | 750x1334
745x745 | 1242x2208
1001x1001 | 1668x2224
1229x1229 | 2048x2732
922x922 | 1536x2048
192x192 | 320x426
192x192 | 320x470
288x288 | 480x640
432x432 | 720x960
576x576 | 960x1280
768x768 | 1280x1920
```

Optimise / Compress images:
        
```bash
⏻ brew install optipng
```

```bash
target_folder="assets/webmanifest/icons/any"
optipng -o7 -zm1-9 ${target_folder}/*.png
```

```bash
target_folder="assets/webmanifest/icons/maskable"
optipng -o7 -zm1-9 ${target_folder}/*.png
```

```bash
target_folder="assets/webmanifest/icons/monochrome"
optipng -o7 -zm1-9 ${target_folder}/*.png
```

```bash
target_folder="assets/webmanifest/splash_screens"
optipng -o7 -zm1-9 ${target_folder}/*.png
```

Optimise / Compress images — scripted version:

```bash
declare -a imagesArray

imagesArray=()

imagesArray+=(
    "assets/webmanifest/icons/any"
    "assets/webmanifest/icons/maskable"
    "assets/webmanifest/icons/monochrome"
    "assets/webmanifest/splash_screens"
)

for target_folder in ${imagesArray[@]}; do

    optipng -o7 -zm1-9 ${target_folder}/*.png

done
```

### References

* RealFavIconGenerator - [Android Chrome and its favicon](https://realfavicongenerator.net/blog/android-chrome-and-its-favicon/)
* Android Developer API Guides - [Launcher Icons](https://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)
* Chrome Developer - [Add to Homescreen](https://developer.chrome.com/multidevice/android/installtohomescreen)
* Goole Developers Web Fundamentals - [The Web App Manifest](https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/)
* Google Developers Updates - [Adding a Splash Screen](https://developers.google.com/web/updates/2015/10/splashscreen)
* Google Developers Updates - [Support for theme-color in Chrome 39 for Android](https://developers.google.com/web/updates/2014/11/Support-for-theme-color-in-Chrome-39-for-Android)
* MDN - [Web App Manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest)
* Material Design - [Style - Icons](https://material.io/guidelines/style/icons.html)

* W3C - [Web Application Manifest](https://w3c.github.io/manifest)
* Web.dev - [Adaptive icon support in PWAs with maskable icons](https://web.dev/articles/maskable-icon)

***

## Apple iOS

- 1024×1024 px — App Store icon (required)
- 180×180 px — iPhone Retina home screen
- 167×167 px — iPad Pro home screen
- 152×152 px — iPad Retina home screen
- 120×120 px — iPhone Spotlight
- 87×87 px — iPad Spotlight
- 80×80 px — iPad App Settings
- 60×60 px — iPhone App Settings


48x48

57x57 (iOS)

60x60 (iOS)

72x72 (iOS)

76x76 (iOS)

96x96

114x114 (iOS)

120x120 (iOS)

144x144

152x152 (iOS)

180x180 (iOS)

192x192

256x256

384x384

512x512

The "apple" folder contains all of the images used by iOS - e.g. iPhones and iPads.

Although iOS supports an alpha channel (i.e. transarency information) it chooses
    to use a black background which looks ugly on the home page. The icons in
    this package have therefore been created with a solid white background.

There is no need to reference the icons from the HTML (e.g. apple-touch-icon)
    since the iOS devices will automatically retrieve the appropriate image
    from the root of the website. Some older browsers may attempt to download
    an Apple touch icon if a link exists in the HTML but this would be
    undesirable because of the solid white background. It is therefore
    preferable to avoid links in the HTML and leave iOS to automatically
    retrieve the appropriate image.

Specific images for every resolution have been created to avoid 404 errors on
    the server. Default images are included to ensure there is always an icon
    for iOS regardless of the device / version; apple-touch-icon.png
    and apple-touch-icon-precomposed.png

iOS 6 and earlier used the following sizes and corresponding precomposed images:

| iPhone (non-Retina) | iPhone (Retina) | iPad (non-Retina) | iPad (Retina) |
|:-------------------:|:---------------:|:-----------------:|:-------------:|
|     @1x display     |   @2x display   |    @1x display    |  @2x display  |
|     57 x 57 px      |  114 x 114 px   |    72 x 72 px     | 144 x 144 px  |

iOS 7 was released on 18/09/2013 and replaced the iOS 6 image sizes with the following:

| iPhone (non-Retina) | iPhone (Retina) | iPad (non-Retina) | iPad (Retina) |
|:-------------------:|:---------------:|:-----------------:|:-------------:|
|     @1x display     |   @2x display   |    @1x display    |  @2x display  |
|     60 x 60 px      |  120 x 120 px   |    76 x 76 px     | 152 x 152 px  |

iOS 8 was released on 17/09/2014 and added the following size:

| iPhone 6+ (Retina) |
|:------------------:|
|      @3x display   |
|    180 x 180 px    |

iOS 9 was released on 16/09/2015 and added the following size:

| iPad Pro (Retina)|
|:----------------:|
|     @2x display  |
|   167 x 167 px   |

Note: This package does not include dedicated images for iOS <=6
    since they have been superceded by iOS 7 since 2013.

### Commands

All of the images were generated with a white background and a slight border:
    
```bash

source="assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg"

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 48x48 \
    -gravity center \
    -extent 57x57 \
    assets/icons/apple/apple-touch-icon-57x57.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 54x54 \
    -gravity center \
    -extent 60x60 \
    assets/icons/apple/apple-touch-icon-60x60.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 60x60 \
    -gravity center \
    -extent 72x72 \
    assets/icons/apple/apple-touch-icon-72x72.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 68x68 \
    -gravity center \
    -extent 76x76 \
    assets/icons/apple/apple-touch-icon-76x76.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 94x94 \
    -gravity center \
    -extent 114x114 \
    assets/icons/apple/apple-touch-icon-114x114.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 108x108 \
    -gravity center \
    -extent 120x120 \
    assets/icons/apple/apple-touch-icon-120x120.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 126x126 \
    -gravity center \
    -extent 144x144 \
    assets/icons/apple/apple-touch-icon-144x144.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 136x136 \
    -gravity center \
    -extent 152x152 \
    assets/icons/apple/apple-touch-icon-152x152.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 150x150 \
    -gravity center \
    -extent 167x167 \
    assets/icons/apple/apple-touch-icon-167x167.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 162x162 \
    -gravity center \
    -extent 180x180 \
    assets/icons/apple/apple-touch-icon.png

magick \
    -background white \
    "${source}" \
    -trim \
    -resize 162x162 \
    -gravity center \
    -extent 180x180 \
    assets/icons/apple/apple-touch-icon-precomposed.png
```

```bash
optipng -o7 -zm1-9 assets/icons/apple/*.png
```

apple-touch-startup-images — scripted version:

```bash
source_icon="assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg"

target_folder="assets/apple-touch-startup-image"

mkdir -p "${target_folder}"

declare -a splash_screensArray

splash_screensArray=()

splash_screensArray+=(
    "1125x2436"
    "750x1334"
    "1242x2208"
    "1668x2224"
    "2048x2732"
    "1536x2048"
    "960x1280"
    "1280x1920"
)

for icon in ${splash_screensArray[@]}; do

    IFS="x" read -r -a arr <<<"${icon}"

    splash_x="${arr[0]}"
    splash_y="${arr[1]}"

    # echo "${splash_x}"
    # echo "${splash_y}"

    if [[ ${splash_x} -le ${splash_y} ]]; then
        splash_resize="${splash_x}"
    else
        splash_resize="${splash_y}"
    fi

    # Using bc + printf
    splash_resize=$( printf "%.0f\n" $( echo "scale=2; ${splash_resize} * 0.6" | bc) )
    
    splash_resize="${splash_resize}x${splash_resize}"
    
    splash_extent="${icon}"

    echo "${splash_resize} | ${splash_extent}"

    magick \
        -background transparent \
        "${source_icon}" \
        -trim \
        -resize ${splash_resize} \
        -gravity center \
        -extent ${splash_extent} \
        "${target_folder}/apple-touch-startup-image-${splash_extent}.png"

done
```

### References

* Mathias Bynens - [Everything you always wanted to know about touch icons](https://mathiasbynens.be/notes/touch-icons)
* RealFavIconGenerator - [Apple touch icon: The Good, the Bad and the Ugly](https://realfavicongenerator.net/blog/apple-touch-icon-the-good-the-bad-the-ugly)
* Apple - [Configuring Web Applications](https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)
* Apple - [App Icon Sizes](https://developer.apple.com/ios/human-interface-guidelines/graphics/app-icon/)

## Classic Favicon

The "classic" favicon is supported by pretty much all browsers and resides
    in the root directory of the website. There is no requirement for a link
    in the HTML and this seems like a decent policy because there are a number
    of differing / conflicting approaches which are browser specific.

Here are just a few examples:

```xml
<link rel="shortcut icon" href="/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/favicon.ico">
```

The ICO format was invented by Microsoft and typically contains multiple images.
Microsoft recommends 16x16, 32x32 and 48x48 pixel images to be included
    in a favicon. The most commonly used sizes are 16x16 and 32x32 but larger
    sizes may be used for desktop icons, etc.

Remote desktop environments prefer 256 colour images but this favicon
    includes 32-bit images (RGB + alpha) because they look nicer and support
    transparency. In theory the ICO format also supports image compression
    but there are reports of compression causing applications to crash
    on some platforms (e.g. Windows Vista).

Modern browsers are better off with a high resolution PNG rather than the ICO
    so you can use the following in the HTML:

```xml
<link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png" />
```

Note: 192 is a common factor of 16, 24, 32, 48, 64 and 96 so it can easily be
    scaled when a smaller icon is required.

### Commands

The classic favicon was created using [ImageMagick](https://www.imagemagick.org/):

with background

```bash
magick \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    -bordercolor white \
    -border 0 \
    \( -clone 0 -resize 16x16 \) \
    \( -clone 0 -resize 32x32 \) \
    \( -clone 0 -resize 48x48 \) \
    \( -clone 0 -resize 64x64 \) \
    -delete 0 \
    -alpha off \
    -colors 256 \
    "favicon.ico"
```

or without background and more sizes

```bash
magick \
    -density 256x256 \
    -define icon:auto-resize=256,128,96,64,48,32,16 \
    -background none \
    "assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg" \
    "favicon.ico"
```

### References

* Mathias Bynens - [rel="shortcut icon" considered harmful](https://mathiasbynens.be/notes/rel-shortcut-icon)
* Jonathan T. Neil - [Understand the Favicon](http://www.jonathantneal.com/blog/understand-the-favicon/)
* MSDN - [Customizing the Site Icon](https://msdn.microsoft.com/library/gg491740(v=vs.85).aspx)
* W3C - [How to Add a Favicon to your Site](https://www.w3.org/2005/10/howto-favicon)


## Microsoft Edge + Internet Explorer

The "microsoft" folder contains all of the tile images
    used by Windows 8.1 / Windows 10 + IE 11. These tiles can be pinned to the
    start menu by Edge and Internet Explorer and blend in with other
    applications using the Metro style.

There are 4 tile sizes (small, medium, wide and large) and the resolutions are
    specified by Microsoft. You will notice that the recommended size of the
    tiles is larger than you might expect; Microsoft recommends +80%.

e.g. The 150 x 150 (medium) tile is actually 270 x 270.

| Tile Name | Tile Size    | Minimum Size | Recommended Size |
|:---------:|:------------:|:------------:|:----------------:|
| Small     |  70 x 70 px  |  56 x 56 px  |   128 x 128 px   |
| Medium    | 150 x 150 px | 120 x 120 px |   270 x 270 px   |
| Wide      | 310 x 150 px | 248 x 120 px |   558 x 270 px   |
| Large     | 310 x 310 px | 248 x 248 px |   558 x 558 px   |

The tiles need to be specified in browserconfig.xml which should be in the root of your website:

```xml
<?xml version="1.0" encoding="utf-8"?>

<browserconfig>
    <msapplication>
        <tile>
            <square70x70logo    src="assets/icons/microsoft/mstile-70x70.png"/>
            <square150x150logo  src="assets/icons/microsoft/mstile-150x150.png"/>
            <wide310x150logo    src="assets/icons/microsoft/mstile-310x150.png"/>
            <square310x310logo  src="assets/icons/microsoft/mstile-310x310.png"/>
            <TileColor>#ffffff</TileColor>
        </tile>
    </msapplication>
</browserconfig>
```

There is no need for the following in the `<head>` section of the HTML
    as the Microsoft browsers will search the website root automatically:

```xml
<meta name="msapplication-config" content="/browserconfig.xml">
```

Note: My package does not include a 144x144 tile for Windows 8 + IE 10
    because it has been superceded.

### Commands

All of the images were generated from the white silhouette and the image itself
    is only a small portion of the canvas:


```bash

source="assets/workshop/icons/source/favicon • dev • small blue cog with inner hole.svg"
target="assets/icons/microsoft"

mkdir -p "${target}"

magick \
    -background transparent \
    "${source}" \
    -trim \
    -resize 64x64 \
    -gravity center \
    -extent 128x128 \
    "${target}/mstile-70x70.png"

magick \
    -background transparent \
    "${source}" \
    -trim \
    -resize 90x90 \
    -gravity center \
    -extent 270x270 \
    "${target}/mstile-150x150.png"

magick \
    -background transparent \
    "${source}" \
    -trim \
    -resize 90x90 \
    -gravity center \
    -extent 558x270 \
    "${target}/mstile-310x150.png"

magick \
    -background transparent \
    "${source}" \
    -trim \
    -resize 186x186 \
    -gravity center \
    -extent 558x558 \
    "${target}/mstile-310x310.png"

```

And one extra `msapplication-TileImage`:

```bash
magick \
    -background transparent \
    "${source}" \
    -trim \
    -resize 186x186 \
    -gravity center \
    -extent 512x512 \
    "${target}/mstile-512x512.png"
```

Optimise:

```bash
optipng -o7 -zm1-9 assets/icons/microsoft/*.png
```

### References

* Microsoft - [Creating custom tiles for IE11 websites](https://msdn.microsoft.com/library/dn455106(v=vs.85).aspx)
* Microsoft - [Browser configuration schema reference](https://msdn.microsoft.com/library/dn320426(v=vs.85).aspx)
* ImageMagick - [Shifting images keeping size](http://www.imagemagick.org/discourse-server/viewtopic.php?t=20823)
* RealFaviconGenerator - [More browserconfig.xml, less HTML](https://realfavicongenerator.net/blog/more-browserconfig-xml-less-html/)


## Additional Comments

### Usage

All of the files can simply be placed in the root of a website:

| Platform  | Files                 | Minimum Size | Maximum Size |
|:---------:|:---------------------:|:------------:|:------------:|
| Android   | android-chrome-*.png  |  36 x 36 px  | 512 x 512 px |
| Android   | webmanifest.json      |  36 x 36 px  | 512 x 512 px |
| Apple     | apple-touch-icon*.png |  60 x 60 px  | 180 x 180 px |
| Classic   | favicon.ico           |  16 x 16 px  |  48 x 48 px  |
| Microsoft | mstile-*.png          |  70 x 70 px  | 310 x 310 px |
| Microsoft | browserconfig.xml     |  70 x 70 px  | 310 x 310 px |

The Android Chrome manifest requires a link in the `<head>` section of the HTML:

```xml
<link rel="manifest" href="manifest.webmanifest">
```

You can also include some additional markup for Android Chrome M31 to M38,
    described earlier in this document.

### References

Favicons / Touch Icons

* RealFaviconGenerator - [Favicon – Why you’re doing it wrong](https://realfavicongenerator.net/blog/favicon-why-youre-doing-it-wrong/)
* RealFaviconGenerator - [FAQ](https://realfavicongenerator.net/faq)
* RealCSS - [Favicons, Touch Icons, Tile Icons, etc. Which Do You Need?](https://css-tricks.com/favicon-quiz/)
* favicon-cheat-sheet - [Obsessive cheat sheet to favicon sizes/types](https://github.com/audreyr/favicon-cheat-sheet)

Web Apps

* Google Developers Web Fundamentals - [Icons & Browser Colors](https://developers.google.com/web/fundamentals/design-and-ui/browser-customization/)
* Google Developers Web Fundamentals - [Making Fullscreen Experiences](https://developers.google.com/web/fundamentals/native-hardware/fullscreen/)
* Breaking the Mobile Web - [Home screen web apps for Android thanks to Chrome 31+](http://www.mobilexweb.com/blog/home-screen-web-apps-android-chrome-31)
